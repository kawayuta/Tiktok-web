<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

<div class="contents_wrap">

  <section class="video_content">
    <div class="video_player">
      <%= video_tag "", muted: true, controls: true, id:"video" %>
    </div>

    <% if @videos.present? %>
    <div class="video_content_meta">
      <h2 class="video_title"><%= @videos.first.video_title %></h2>
      <div class="video_content_meta_tags">
      <% @videos.first.video_tags.drop(1).each do | tag | %>
        <p class="video_content_meta_tag"><%= link_to "##{tag}", search_tags_path(keyword: tag) %></p>
      <% end %>
      </div>
      <div class="video_content_meta_info">
        <p class="video_content_meta_info_play">
          <i class="fas fa-heart"></i> <span class="video_play_count"><%= @videos.first.video_play_count.to_s(:delimited) %></span>
        </p>

        <p class="video_content_meta_info_comment">
          <i class="fas fa-comment"></i> <span class="video_comment_count"><%= @videos.first.video_comment_count.to_s(:delimited) %></span>
        </p>
        <p class="video_content_meta_info_share">
          <i class="fas fa-share"></i> <span class="video_share_count"><%= @videos.first.video_share_count.to_s(:delimited) %></span>
        </p>
      </div>
    </div>

    <div class="video_content_profile">
      <div class="video_content_profile_image">
        <%= image_tag @videos.first.user.user_covers, class:"video_user_covers" %>
      </div>
      <p class="video_user_nick_name"><%= @videos.first.user.user_nick_name %></p>
    </div>
  <% end %>

  </section>

  <article class="video_content_main">

    <section class="video_content_tag_info">
      <div class="video_content_tag_info_header">
        <%= image_tag @tag.tag_cover_image, :onerror => "this.src='/assets/hash_default.svg'" %>
        <h1>#<%= @tag.tag_title %></h1>
      </div>
      <div class="video_content_tag_info_meta">
        <p class="video_content_tag_info_meta_post">
          <%= @tag.tag_posts_count.to_s(:delimited) %> <span>投稿</span>
        </p>

        <p class="video_content_tag_info_meta_view">
          <%= @tag.tag_views_count.to_s(:delimited) %> <span>回再生</span>
        </p>
      </div>
    </section>

    <section class="video_content_item">
      <ul>
        <% if @videos.present? %>
        <% @videos.each_with_index do |video, i| %>
          <li>
              <%= image_tag video.video_cover_image, class: "video_data video_index_#{i}",
                            data: {video_source: video.video_source,
                                   video_index: i,
                                   video_title: video.video_title,
                                   video_tags: video.video_tags,
                                   video_play_count: video.video_play_count.to_s(:delimited),
                                   video_comment_count: video.video_comment_count.to_s(:delimited),
                                   video_share_count: video.video_share_count.to_s(:delimited),
                                   video_user_covers: video.user.user_covers,
                                   video_user_nick_name: video.user.user_nick_name,
                            } %>
          </li>
          <% end %>
        <% end %>
      </ul>
    </section>

  </article>

</div>

</body>
</html>
